"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function buildDataFromEvent(event) {
    let data = event === null || event === void 0 ? void 0 : event.body;
    if (event === null || event === void 0 ? void 0 : event.isBase64Encoded) {
        data = new Buffer(data, 'base64').toString('ascii');
    }
    const headers = ((event === null || event === void 0 ? void 0 : event.headers) || {});
    const contentType = (headers['Content-Type'] || headers['content-type'] || '').toLowerCase();
    switch (contentType) {
        case 'application/json':
        case 'application/json;charset=utf-8':
        case 'text/json':
        case 'text/json;charset=utf-8':
            data = JSON.parse(data);
            break;
        default:
    }
    return data;
}
exports.buildDataFromEvent = buildDataFromEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGREYXRhRnJvbUV2ZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2J1aWxkRGF0YUZyb21FdmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLFNBQWdCLGtCQUFrQixDQUFDLEtBQUs7SUFDcEMsSUFBSSxJQUFJLEdBQUcsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLElBQUksQ0FBQztJQUN2QixJQUFJLEtBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxlQUFlLEVBQUU7UUFDeEIsSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDdkQ7SUFDRCxNQUFNLE9BQU8sR0FBRyxDQUFDLENBQUEsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLE9BQU8sS0FBSSxFQUFFLENBQUMsQ0FBQztJQUN2QyxNQUFNLFdBQVcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDN0YsUUFBUSxXQUFXLEVBQUU7UUFDakIsS0FBSyxrQkFBa0IsQ0FBQztRQUN4QixLQUFLLGdDQUFnQyxDQUFDO1FBQ3RDLEtBQUssV0FBVyxDQUFDO1FBQ2pCLEtBQUsseUJBQXlCO1lBQzFCLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hCLE1BQU07UUFDVixRQUFRO0tBRVg7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDO0FBbEJELGdEQWtCQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBidWlsZERhdGFGcm9tRXZlbnQoZXZlbnQpIHtcbiAgICBsZXQgZGF0YSA9IGV2ZW50Py5ib2R5O1xuICAgIGlmIChldmVudD8uaXNCYXNlNjRFbmNvZGVkKSB7XG4gICAgICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsICdiYXNlNjQnKS50b1N0cmluZygnYXNjaWknKTtcbiAgICB9XG4gICAgY29uc3QgaGVhZGVycyA9IChldmVudD8uaGVhZGVycyB8fCB7fSk7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSAoaGVhZGVyc1snQ29udGVudC1UeXBlJ10gfHwgaGVhZGVyc1snY29udGVudC10eXBlJ10gfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgc3dpdGNoIChjb250ZW50VHlwZSkge1xuICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi9qc29uJzpcbiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JzpcbiAgICAgICAgY2FzZSAndGV4dC9qc29uJzpcbiAgICAgICAgY2FzZSAndGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgnOlxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIGRhdGEgc3RheSBhcy1pc1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn0iXX0=