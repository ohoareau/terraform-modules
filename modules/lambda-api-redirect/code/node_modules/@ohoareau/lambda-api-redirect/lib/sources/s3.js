"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_1 = require("@ohoareau/aws");
async function s3(ctx) {
    try {
        const { bucket, key } = ctx.query;
        const data = await aws_1.s3.fromJsonFile(bucket, key);
        if (!data || !data.location)
            return undefined;
        return data;
    }
    catch (e) {
        console.error(e);
        return undefined;
    }
}
exports.s3 = s3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiczMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc291cmNlcy9zMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVDQUEwQztBQUVuQyxLQUFLLFVBQVUsRUFBRSxDQUFDLEdBQVE7SUFDN0IsSUFBSTtRQUNBLE1BQU0sRUFBQyxNQUFNLEVBQUUsR0FBRyxFQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztRQUNoQyxNQUFNLElBQUksR0FBRyxNQUFNLFFBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU8sU0FBUyxDQUFDO1FBQzlDLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFBQyxPQUFPLENBQUMsRUFBRTtRQUNSLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsT0FBTyxTQUFTLENBQUM7S0FDcEI7QUFDTCxDQUFDO0FBVkQsZ0JBVUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N0eH0gZnJvbSAnQG9ob2FyZWF1L2xhbWJkYS11dGlscyc7XG5pbXBvcnQge3MzIGFzIGF3c3MzfSBmcm9tICdAb2hvYXJlYXUvYXdzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHMzKGN0eDogY3R4KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qge2J1Y2tldCwga2V5fSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGF3c3MzLmZyb21Kc29uRmlsZShidWNrZXQsIGtleSk7XG4gICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5sb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn0iXX0=