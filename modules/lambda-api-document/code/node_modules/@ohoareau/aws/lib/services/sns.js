"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const awssns = new (require('aws-sdk/clients/sns'));
exports.sns = {
    publish: async ({ message, attributes, topic }) => awssns.publish({
        Message: JSON.stringify(await message),
        MessageAttributes: Object.entries(attributes).reduce((acc, [k, v]) => {
            acc[k] = { DataType: 'String', StringValue: v };
            return acc;
        }, {}),
        TopicArn: topic,
    }).promise(),
};
exports.default = exports.sns;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlcnZpY2VzL3Nucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0FBRXZDLFFBQUEsR0FBRyxHQUFHO0lBQ2YsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDNUQsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxPQUFPLENBQUM7UUFDdEMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNqRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUMsQ0FBQztZQUM5QyxPQUFPLEdBQUcsQ0FBQztRQUNmLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDTixRQUFRLEVBQUUsS0FBSztLQUNsQixDQUFDLENBQUMsT0FBTyxFQUFFO0NBQ2YsQ0FBQTtBQUVELGtCQUFlLFdBQUcsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGF3c3NucyA9IG5ldyAocmVxdWlyZSgnYXdzLXNkay9jbGllbnRzL3NucycpKTtcblxuZXhwb3J0IGNvbnN0IHNucyA9IHtcbiAgICBwdWJsaXNoOiBhc3luYyAoe21lc3NhZ2UsIGF0dHJpYnV0ZXMsIHRvcGljfSkgPT4gYXdzc25zLnB1Ymxpc2goe1xuICAgICAgICBNZXNzYWdlOiBKU09OLnN0cmluZ2lmeShhd2FpdCBtZXNzYWdlKSxcbiAgICAgICAgTWVzc2FnZUF0dHJpYnV0ZXM6IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLnJlZHVjZSgoYWNjLCBbaywgdl0pID0+IHtcbiAgICAgICAgICAgIGFjY1trXSA9IHtEYXRhVHlwZTogJ1N0cmluZycsIFN0cmluZ1ZhbHVlOiB2fTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KSxcbiAgICAgICAgVG9waWNBcm46IHRvcGljLFxuICAgIH0pLnByb21pc2UoKSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgc25zIl19