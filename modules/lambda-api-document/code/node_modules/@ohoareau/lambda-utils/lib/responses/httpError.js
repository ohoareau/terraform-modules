"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
async function httpError({ error = undefined, phase = undefined, headers = {}, statusCode = 500 } = {}) {
    const defaultHeaders = {
        'Cache-Control': 'no-cache',
        'Content-Type': 'application/json;charset=UTF-8',
    };
    if (!error) {
        return {
            body: undefined,
            isBase64Encoded: false,
            statusCode,
            headers: {
                ...defaultHeaders,
                ...headers,
            }
        };
    }
    const e = error;
    phase && (defaultHeaders['X-Error-Phase'] = phase);
    const { httpHeaders = {}, httpStatusCode = 500, ...data } = (e['serialize'] ? e['serialize']() : {}) || {};
    return {
        body: JSON.stringify({
            status: 'error',
            message: e.message,
            data,
        }),
        isBase64Encoded: false,
        statusCode: httpStatusCode || 500,
        headers: {
            ...defaultHeaders,
            ...httpHeaders,
            ...headers,
        },
    };
}
exports.httpError = httpError;
exports.default = httpError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHR0cEVycm9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Jlc3BvbnNlcy9odHRwRXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBTyxLQUFLLFVBQVUsU0FBUyxDQUFDLEVBQUMsS0FBSyxHQUFHLFNBQVMsRUFBRSxLQUFLLEdBQUcsU0FBUyxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUUsVUFBVSxHQUFHLEdBQUcsS0FBeUUsRUFBRTtJQUM1SyxNQUFNLGNBQWMsR0FBRztRQUNuQixlQUFlLEVBQUUsVUFBVTtRQUMzQixjQUFjLEVBQUUsZ0NBQWdDO0tBQ25ELENBQUE7SUFDRCxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQ1IsT0FBTztZQUNILElBQUksRUFBRSxTQUFTO1lBQ2YsZUFBZSxFQUFFLEtBQUs7WUFDdEIsVUFBVTtZQUNWLE9BQU8sRUFBRTtnQkFDTCxHQUFHLGNBQWM7Z0JBQ2pCLEdBQUcsT0FBTzthQUNiO1NBQ0osQ0FBQTtLQUVKO0lBQ0QsTUFBTSxDQUFDLEdBQUcsS0FBZSxDQUFBO0lBQ3pCLEtBQUssSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUNuRCxNQUFNLEVBQUMsV0FBVyxHQUFHLEVBQUUsRUFBRSxjQUFjLEdBQUcsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekcsT0FBTztRQUNILElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2pCLE1BQU0sRUFBRSxPQUFPO1lBQ2YsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPO1lBQ2xCLElBQUk7U0FDUCxDQUFDO1FBQ0YsZUFBZSxFQUFFLEtBQUs7UUFDdEIsVUFBVSxFQUFFLGNBQWMsSUFBSSxHQUFHO1FBQ2pDLE9BQU8sRUFBRTtZQUNMLEdBQUcsY0FBYztZQUNqQixHQUFHLFdBQVc7WUFDZCxHQUFHLE9BQU87U0FDYjtLQUNKLENBQUM7QUFDTixDQUFDO0FBbENELDhCQWtDQztBQUVELGtCQUFlLFNBQVMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiBodHRwRXJyb3Ioe2Vycm9yID0gdW5kZWZpbmVkLCBwaGFzZSA9IHVuZGVmaW5lZCwgaGVhZGVycyA9IHt9LCBzdGF0dXNDb2RlID0gNTAwfToge2Vycm9yPzogRXJyb3IsIHBoYXNlPzogc3RyaW5nLCBoZWFkZXJzPzogYW55LCBzdGF0dXNDb2RlPzogbnVtYmVyfSA9IHt9KSB7XG4gICAgY29uc3QgZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIH1cbiAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib2R5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgY29uc3QgZSA9IGVycm9yISBhcyBFcnJvclxuICAgIHBoYXNlICYmIChkZWZhdWx0SGVhZGVyc1snWC1FcnJvci1QaGFzZSddID0gcGhhc2UpO1xuICAgIGNvbnN0IHtodHRwSGVhZGVycyA9IHt9LCBodHRwU3RhdHVzQ29kZSA9IDUwMCwgLi4uZGF0YX0gPSAoZVsnc2VyaWFsaXplJ10gPyBlWydzZXJpYWxpemUnXSgpIDoge30pIHx8IHt9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0pLFxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICBzdGF0dXNDb2RlOiBodHRwU3RhdHVzQ29kZSB8fCA1MDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgICAgICAgLi4uaHR0cEhlYWRlcnMsXG4gICAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGh0dHBFcnJvciJdfQ==