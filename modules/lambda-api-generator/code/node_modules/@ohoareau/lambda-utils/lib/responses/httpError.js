"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
async function httpError({ error = undefined, phase = undefined, headers = {}, statusCode = 500 } = {}) {
    const defaultHeaders = {
        'Cache-Control': 'no-cache',
        'Content-Type': 'application/json;charset=UTF-8',
    };
    if (!error) {
        return {
            body: undefined,
            isBase64Encoded: false,
            statusCode,
            headers: {
                ...defaultHeaders,
                ...headers,
            }
        };
    }
    const e = error;
    defaultHeaders['X-Error-Message'] = e.message;
    phase && (defaultHeaders['X-Error-Phase'] = phase);
    const { httpHeaders = {}, httpStatusCode = 500, ...data } = (e['serialize'] ? e['serialize']() : {}) || {};
    return {
        body: {
            status: 'error',
            message: e.message,
            data,
        },
        isBase64Encoded: false,
        statusCode: httpStatusCode || 500,
        headers: {
            ...defaultHeaders,
            ...httpHeaders,
            ...headers,
        },
    };
}
exports.httpError = httpError;
exports.default = httpError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHR0cEVycm9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Jlc3BvbnNlcy9odHRwRXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBTyxLQUFLLFVBQVUsU0FBUyxDQUFDLEVBQUMsS0FBSyxHQUFHLFNBQVMsRUFBRSxLQUFLLEdBQUcsU0FBUyxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUUsVUFBVSxHQUFHLEdBQUcsS0FBeUUsRUFBRTtJQUM1SyxNQUFNLGNBQWMsR0FBRztRQUNuQixlQUFlLEVBQUUsVUFBVTtRQUMzQixjQUFjLEVBQUUsZ0NBQWdDO0tBQ25ELENBQUE7SUFDRCxJQUFJLENBQUMsS0FBSyxFQUFFO1FBQ1IsT0FBTztZQUNILElBQUksRUFBRSxTQUFTO1lBQ2YsZUFBZSxFQUFFLEtBQUs7WUFDdEIsVUFBVTtZQUNWLE9BQU8sRUFBRTtnQkFDTCxHQUFHLGNBQWM7Z0JBQ2pCLEdBQUcsT0FBTzthQUNiO1NBQ0osQ0FBQTtLQUVKO0lBQ0QsTUFBTSxDQUFDLEdBQUcsS0FBZSxDQUFBO0lBQ3pCLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDOUMsS0FBSyxJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ25ELE1BQU0sRUFBQyxXQUFXLEdBQUcsRUFBRSxFQUFFLGNBQWMsR0FBRyxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN6RyxPQUFPO1FBQ0gsSUFBSSxFQUFFO1lBQ0YsTUFBTSxFQUFFLE9BQU87WUFDZixPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU87WUFDbEIsSUFBSTtTQUNQO1FBQ0QsZUFBZSxFQUFFLEtBQUs7UUFDdEIsVUFBVSxFQUFFLGNBQWMsSUFBSSxHQUFHO1FBQ2pDLE9BQU8sRUFBRTtZQUNMLEdBQUcsY0FBYztZQUNqQixHQUFHLFdBQVc7WUFDZCxHQUFHLE9BQU87U0FDYjtLQUNKLENBQUM7QUFDTixDQUFDO0FBbkNELDhCQW1DQztBQUVELGtCQUFlLFNBQVMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiBodHRwRXJyb3Ioe2Vycm9yID0gdW5kZWZpbmVkLCBwaGFzZSA9IHVuZGVmaW5lZCwgaGVhZGVycyA9IHt9LCBzdGF0dXNDb2RlID0gNTAwfToge2Vycm9yPzogRXJyb3IsIHBoYXNlPzogc3RyaW5nLCBoZWFkZXJzPzogYW55LCBzdGF0dXNDb2RlPzogbnVtYmVyfSA9IHt9KSB7XG4gICAgY29uc3QgZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIH1cbiAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib2R5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgY29uc3QgZSA9IGVycm9yISBhcyBFcnJvclxuICAgIGRlZmF1bHRIZWFkZXJzWydYLUVycm9yLU1lc3NhZ2UnXSA9IGUubWVzc2FnZTtcbiAgICBwaGFzZSAmJiAoZGVmYXVsdEhlYWRlcnNbJ1gtRXJyb3ItUGhhc2UnXSA9IHBoYXNlKTtcbiAgICBjb25zdCB7aHR0cEhlYWRlcnMgPSB7fSwgaHR0cFN0YXR1c0NvZGUgPSA1MDAsIC4uLmRhdGF9ID0gKGVbJ3NlcmlhbGl6ZSddID8gZVsnc2VyaWFsaXplJ10oKSA6IHt9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICB9LFxuICAgICAgICBpc0Jhc2U2NEVuY29kZWQ6IGZhbHNlLFxuICAgICAgICBzdGF0dXNDb2RlOiBodHRwU3RhdHVzQ29kZSB8fCA1MDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgICAgICAgLi4uaHR0cEhlYWRlcnMsXG4gICAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGh0dHBFcnJvciJdfQ==