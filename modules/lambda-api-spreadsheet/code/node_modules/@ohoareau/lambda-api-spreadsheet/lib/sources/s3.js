"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_1 = require("@ohoareau/aws");
async function s3(ctx) {
    var _a;
    let { bucket, name } = ctx.query;
    const bucketName = (((_a = ctx.config) === null || _a === void 0 ? void 0 : _a.buckets) || {})[bucket];
    if (!bucketName)
        return undefined;
    return {
        definition: await aws_1.s3.fromJsonFile(bucketName, `${name}.json`),
    };
}
exports.s3 = s3;
exports.default = s3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiczMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc291cmNlcy9zMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUEwQztBQUduQyxLQUFLLFVBQVUsRUFBRSxDQUFDLEdBQVE7O0lBQzdCLElBQUksRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztJQUMvQixNQUFNLFVBQVUsR0FBRyxDQUFDLE9BQUEsR0FBRyxDQUFDLE1BQU0sMENBQUUsT0FBTyxLQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZELElBQUksQ0FBQyxVQUFVO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFDbEMsT0FBTztRQUNILFVBQVUsRUFBRSxNQUFNLFFBQUssQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLEdBQUcsSUFBSSxPQUFPLENBQUM7S0FDbkUsQ0FBQztBQUNOLENBQUM7QUFQRCxnQkFPQztBQUVELGtCQUFlLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7czMgYXMgYXdzczN9IGZyb20gJ0BvaG9hcmVhdS9hd3MnO1xuaW1wb3J0IHtjdHh9IGZyb20gJ0BvaG9hcmVhdS9sYW1iZGEtdXRpbHMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gczMoY3R4OiBjdHgpOiBQcm9taXNlPGFueXx1bmRlZmluZWQ+IHtcbiAgICBsZXQge2J1Y2tldCwgbmFtZX0gPSBjdHgucXVlcnk7XG4gICAgY29uc3QgYnVja2V0TmFtZSA9IChjdHguY29uZmlnPy5idWNrZXRzIHx8IHt9KVtidWNrZXRdO1xuICAgIGlmICghYnVja2V0TmFtZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZWZpbml0aW9uOiBhd2FpdCBhd3NzMy5mcm9tSnNvbkZpbGUoYnVja2V0TmFtZSwgYCR7bmFtZX0uanNvbmApLFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHMzIl19