"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_parser_1 = require("path-parser");
function testRoute(route, request) {
    if (route.method) {
        const methods = Array.isArray(route.method) ? route.method : [route.method];
        const found = methods.find(m => (m.toUpperCase() === (request.method || '').toUpperCase()));
        if (!found)
            return undefined;
    }
    if (!route.uri)
        return {};
    return new path_parser_1.Path(route.uri).test(request.uri) || undefined;
}
exports.testRoute = testRoute;
exports.default = testRoute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdFJvdXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL3Rlc3RSb3V0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDZDQUFpQztBQUVqQyxTQUFnQixTQUFTLENBQUMsS0FBWSxFQUFFLE9BQXFCO0lBQ3pELElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTtRQUNkLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM1RSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM1RixJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sU0FBUyxDQUFDO0tBQ2hDO0lBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFDMUIsT0FBTyxJQUFJLGtCQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksU0FBUyxDQUFDO0FBQzlELENBQUM7QUFSRCw4QkFRQztBQUVELGtCQUFlLFNBQVMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aHR0cF9yZXF1ZXN0LCByb3V0ZX0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQge1BhdGh9IGZyb20gXCJwYXRoLXBhcnNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdGVzdFJvdXRlKHJvdXRlOiByb3V0ZSwgcmVxdWVzdDogaHR0cF9yZXF1ZXN0KTogYW55fHVuZGVmaW5lZCB7XG4gICAgaWYgKHJvdXRlLm1ldGhvZCkge1xuICAgICAgICBjb25zdCBtZXRob2RzID0gQXJyYXkuaXNBcnJheShyb3V0ZS5tZXRob2QpID8gcm91dGUubWV0aG9kIDogW3JvdXRlLm1ldGhvZF07XG4gICAgICAgIGNvbnN0IGZvdW5kID0gbWV0aG9kcy5maW5kKG0gPT4gKG0udG9VcHBlckNhc2UoKSA9PT0gKHJlcXVlc3QubWV0aG9kIHx8ICcnKS50b1VwcGVyQ2FzZSgpKSk7XG4gICAgICAgIGlmICghZm91bmQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghcm91dGUudXJpKSByZXR1cm4ge307IC8vIG1hdGNoIHdpdGggbm8gcGFyYW1ldGVyc1xuICAgIHJldHVybiBuZXcgUGF0aChyb3V0ZS51cmkpLnRlc3QocmVxdWVzdC51cmkpIHx8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdGVzdFJvdXRlXG4iXX0=