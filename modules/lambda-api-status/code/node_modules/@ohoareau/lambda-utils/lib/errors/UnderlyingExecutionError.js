"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class UnderlyingExecutionError extends Error {
    constructor(e, action = undefined, extras = {}) {
        super(`Underlying ${action || 'execution'} error: ${e.message}`);
        this.underlyingError = e;
        this.action = action;
        this.extras = { ...extras };
    }
    getUnderlyingError() {
        return this.underlyingError;
    }
    getAction() {
        return this.action;
    }
    getExtras() {
        return this.extras;
    }
    serialize() {
        return {
            httpStatusCode: 500,
            action: this.getAction(),
            underlyingError: {
                message: this.getUnderlyingError().message
            },
            ...(this.getExtras()),
        };
    }
}
exports.UnderlyingExecutionError = UnderlyingExecutionError;
exports.default = UnderlyingExecutionError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVW5kZXJseWluZ0V4ZWN1dGlvbkVycm9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vycm9ycy9VbmRlcmx5aW5nRXhlY3V0aW9uRXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFhLHdCQUF5QixTQUFRLEtBQUs7SUFLL0MsWUFBWSxDQUFRLEVBQUUsU0FBMkIsU0FBUyxFQUFFLFNBQWMsRUFBRTtRQUN4RSxLQUFLLENBQUMsY0FBYyxNQUFNLElBQUksV0FBVyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBQyxHQUFHLE1BQU0sRUFBQyxDQUFDO0lBQzlCLENBQUM7SUFDRCxrQkFBa0I7UUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQztJQUNELFNBQVM7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUNELFNBQVM7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUNELFNBQVM7UUFDTCxPQUFPO1lBQ0gsY0FBYyxFQUFFLEdBQUc7WUFDbkIsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDeEIsZUFBZSxFQUFFO2dCQUNiLE9BQU8sRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxPQUFPO2FBQzdDO1lBQ0QsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUN4QixDQUFBO0lBQ0wsQ0FBQztDQUNKO0FBOUJELDREQThCQztBQUVELGtCQUFlLHdCQUF3QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFVuZGVybHlpbmdFeGVjdXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgdW5kZXJseWluZ0Vycm9yOiBFcnJvcjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYWN0aW9uOiBzdHJpbmd8dW5kZWZpbmVkO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBleHRyYXM6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKGU6IEVycm9yLCBhY3Rpb246IHN0cmluZ3x1bmRlZmluZWQgPSB1bmRlZmluZWQsIGV4dHJhczogYW55ID0ge30pIHtcbiAgICAgICAgc3VwZXIoYFVuZGVybHlpbmcgJHthY3Rpb24gfHwgJ2V4ZWN1dGlvbid9IGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nRXJyb3IgPSBlO1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgdGhpcy5leHRyYXMgPSB7Li4uZXh0cmFzfTtcbiAgICB9XG4gICAgZ2V0VW5kZXJseWluZ0Vycm9yKCk6IEVycm9yIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZ0Vycm9yO1xuICAgIH1cbiAgICBnZXRBY3Rpb24oKTogc3RyaW5nfHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbjtcbiAgICB9XG4gICAgZ2V0RXh0cmFzKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhcztcbiAgICB9XG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaHR0cFN0YXR1c0NvZGU6IDUwMCxcbiAgICAgICAgICAgIGFjdGlvbjogdGhpcy5nZXRBY3Rpb24oKSxcbiAgICAgICAgICAgIHVuZGVybHlpbmdFcnJvcjoge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZ2V0VW5kZXJseWluZ0Vycm9yKCkubWVzc2FnZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLih0aGlzLmdldEV4dHJhcygpKSxcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVW5kZXJseWluZ0V4ZWN1dGlvbkVycm9yIl19