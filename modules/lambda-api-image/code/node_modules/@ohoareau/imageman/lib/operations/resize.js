"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const sharp_1 = __importDefault(require("sharp"));
async function operate(img, config) {
    const { width, height, ...rest } = config;
    return sharp_1.default(await sharp_1.default(await img.toBuffer()).resize({
        width: width ? Math.floor(width) : undefined,
        height: height ? Math.floor(height) : undefined,
        ...rest,
    }).toBuffer());
}
exports.default = operate;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL29wZXJhdGlvbnMvcmVzaXplLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0Esa0RBQTBCO0FBRVgsS0FBSyxVQUFVLE9BQU8sQ0FBQyxHQUFHLEVBQUUsTUFBd0I7SUFDL0QsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDeEMsT0FBTyxlQUFLLENBQUMsTUFBTSxlQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDbEQsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztRQUNuRCxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQ3RELEdBQUcsSUFBSTtLQUNWLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ25CLENBQUM7QUFQRCwwQkFPQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cmVzaXplX29wZXJhdGlvbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHNoYXJwIGZyb20gJ3NoYXJwJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gb3BlcmF0ZShpbWcsIGNvbmZpZzogcmVzaXplX29wZXJhdGlvbikge1xuICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0LCAuLi5yZXN0fSA9IGNvbmZpZztcbiAgICByZXR1cm4gc2hhcnAoYXdhaXQgc2hhcnAoYXdhaXQgaW1nLnRvQnVmZmVyKCkpLnJlc2l6ZSh7XG4gICAgICAgIHdpZHRoOiB3aWR0aCA/IE1hdGguZmxvb3Iod2lkdGggYXMgYW55KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQgPyBNYXRoLmZsb29yKGhlaWdodCBhcyBhbnkpIDogdW5kZWZpbmVkLFxuICAgICAgICAuLi5yZXN0LFxuICAgIH0pLnRvQnVmZmVyKCkpO1xufSJdfQ==