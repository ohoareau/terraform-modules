"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = __importDefault(require("./index"));
async function main(argv) {
    if (!argv[3])
        throw new Error('Syntax: imageman <input> <operationsFile> [[<output>] [<configFile>]]');
    const operations = require(argv[3]);
    return index_1.default({
        output: 'stdout',
        ...(argv[5] ? (require(argv[5]) || {}) : {}),
        input: argv[2],
        ...((operations && operations.length) ? { operations } : {}),
        ...(argv[4] ? { output: argv[4] === '-' ? 'stdout' : argv[4] } : {}),
    });
}
exports.default = main;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NsaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9EQUE0QjtBQUU1QixLQUFLLFVBQVUsSUFBSSxDQUFDLElBQUk7SUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLHVFQUF1RSxDQUFDLENBQUM7SUFFdkcsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLE9BQU8sZUFBSyxDQUFDO1FBQ1QsTUFBTSxFQUFFLFFBQVE7UUFDaEIsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1QyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNkLEdBQUcsQ0FBQyxDQUFDLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsVUFBVSxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMxRCxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7S0FDckUsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQUVELGtCQUFlLElBQUksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBidWlsZCBmcm9tICcuL2luZGV4JztcblxuYXN5bmMgZnVuY3Rpb24gbWFpbihhcmd2KSB7XG4gICAgaWYgKCFhcmd2WzNdKSB0aHJvdyBuZXcgRXJyb3IoJ1N5bnRheDogaW1hZ2VtYW4gPGlucHV0PiA8b3BlcmF0aW9uc0ZpbGU+IFtbPG91dHB1dD5dIFs8Y29uZmlnRmlsZT5dXScpO1xuXG4gICAgY29uc3Qgb3BlcmF0aW9ucyA9IHJlcXVpcmUoYXJndlszXSk7XG4gICAgcmV0dXJuIGJ1aWxkKHtcbiAgICAgICAgb3V0cHV0OiAnc3Rkb3V0JyxcbiAgICAgICAgLi4uKGFyZ3ZbNV0gPyAocmVxdWlyZShhcmd2WzVdKSB8fCB7fSkgOiB7fSksXG4gICAgICAgIGlucHV0OiBhcmd2WzJdLFxuICAgICAgICAuLi4oKG9wZXJhdGlvbnMgJiYgb3BlcmF0aW9ucy5sZW5ndGgpID8ge29wZXJhdGlvbnN9IDoge30pLFxuICAgICAgICAuLi4oYXJndls0XSA/IHtvdXRwdXQ6IGFyZ3ZbNF0gPT09ICctJyA/ICdzdGRvdXQnIDogYXJndls0XX0gOiB7fSksXG4gICAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFpbiJdfQ==