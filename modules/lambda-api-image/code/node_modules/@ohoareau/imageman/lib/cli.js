"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = __importDefault(require("./index"));
const path_1 = __importDefault(require("path"));
async function main(argv) {
    if (!argv[3])
        throw new Error('Syntax: imageman <input> <operationsFile> [[<output>] [<configFile>]]');
    const operations = require(path_1.default.resolve(argv[3]));
    return index_1.default({
        output: 'stdout',
        ...(argv[5] ? (require(path_1.default.resolve(argv[5])) || {}) : {}),
        input: argv[2],
        ...((operations && operations.length) ? { operations } : {}),
        ...(argv[4] ? { output: argv[4] === '-' ? 'stdout' : argv[4] } : {}),
    });
}
exports.default = main;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NsaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9EQUE0QjtBQUM1QixnREFBd0I7QUFFeEIsS0FBSyxVQUFVLElBQUksQ0FBQyxJQUFJO0lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx1RUFBdUUsQ0FBQyxDQUFDO0lBRXZHLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxjQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEQsT0FBTyxlQUFLLENBQUM7UUFDVCxNQUFNLEVBQUUsUUFBUTtRQUNoQixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMxRCxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNkLEdBQUcsQ0FBQyxDQUFDLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsVUFBVSxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMxRCxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7S0FDckUsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQUVELGtCQUFlLElBQUksQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBidWlsZCBmcm9tICcuL2luZGV4JztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKGFyZ3YpIHtcbiAgICBpZiAoIWFyZ3ZbM10pIHRocm93IG5ldyBFcnJvcignU3ludGF4OiBpbWFnZW1hbiA8aW5wdXQ+IDxvcGVyYXRpb25zRmlsZT4gW1s8b3V0cHV0Pl0gWzxjb25maWdGaWxlPl1dJyk7XG5cbiAgICBjb25zdCBvcGVyYXRpb25zID0gcmVxdWlyZShwYXRoLnJlc29sdmUoYXJndlszXSkpO1xuICAgIHJldHVybiBidWlsZCh7XG4gICAgICAgIG91dHB1dDogJ3N0ZG91dCcsXG4gICAgICAgIC4uLihhcmd2WzVdID8gKHJlcXVpcmUocGF0aC5yZXNvbHZlKGFyZ3ZbNV0pKSB8fCB7fSkgOiB7fSksXG4gICAgICAgIGlucHV0OiBhcmd2WzJdLFxuICAgICAgICAuLi4oKG9wZXJhdGlvbnMgJiYgb3BlcmF0aW9ucy5sZW5ndGgpID8ge29wZXJhdGlvbnN9IDoge30pLFxuICAgICAgICAuLi4oYXJndls0XSA/IHtvdXRwdXQ6IGFyZ3ZbNF0gPT09ICctJyA/ICdzdGRvdXQnIDogYXJndls0XX0gOiB7fSksXG4gICAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFpbiJdfQ==