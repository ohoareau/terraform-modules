"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const availableRuleTypes = __importStar(require("../rule-types"));
async function executeRule(rule, request, config) {
    const ruleTypes = { ...availableRuleTypes, ...(config.ruleTypes || {}) };
    const ruleType = ruleTypes[rule === null || rule === void 0 ? void 0 : rule.type];
    if (!ruleType)
        throw new Error(`Unknown rule type '${rule === null || rule === void 0 ? void 0 : rule.type}'`);
    const { input = undefined, operations = [], options = {} } = (await ruleType(request, rule, config)) || {};
    return { input, operations, options };
}
exports.executeRule = executeRule;
exports.default = executeRule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhlY3V0ZVJ1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvZXhlY3V0ZVJ1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0Esa0VBQW9EO0FBRTdDLEtBQUssVUFBVSxXQUFXLENBQUMsSUFBVSxFQUFFLE9BQWdCLEVBQUUsTUFBVztJQUN2RSxNQUFNLFNBQVMsR0FBRyxFQUFDLEdBQUcsa0JBQWtCLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLElBQUksRUFBRSxDQUFDLEVBQUMsQ0FBQztJQUN2RSxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsSUFBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLElBQUksQ0FBQyxRQUFRO1FBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsSUFBSSxhQUFKLElBQUksdUJBQUosSUFBSSxDQUFFLElBQUksR0FBRyxDQUFDLENBQUM7SUFDcEUsTUFBTSxFQUFDLEtBQUssR0FBRyxTQUFTLEVBQUUsVUFBVSxHQUFHLEVBQUUsRUFBRSxPQUFPLEdBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQyxNQUFNLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pHLE9BQU8sRUFBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBQyxDQUFDO0FBQ3hDLENBQUM7QUFORCxrQ0FNQztBQUVELGtCQUFlLFdBQVcsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cmVxdWVzdCwgcnVsZSwgb3JkZXJfb3BlcmF0aW9ufSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCAqIGFzIGF2YWlsYWJsZVJ1bGVUeXBlcyBmcm9tICcuLi9ydWxlLXR5cGVzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVSdWxlKHJ1bGU6IHJ1bGUsIHJlcXVlc3Q6IHJlcXVlc3QsIGNvbmZpZzogYW55KTogUHJvbWlzZTx7aW5wdXQ/OiBzdHJpbmcsIG9wZXJhdGlvbnM/OiBvcmRlcl9vcGVyYXRpb25bXSwgb3B0aW9ucz86IGFueX0+IHtcbiAgICBjb25zdCBydWxlVHlwZXMgPSB7Li4uYXZhaWxhYmxlUnVsZVR5cGVzLCAuLi4oY29uZmlnLnJ1bGVUeXBlcyB8fCB7fSl9O1xuICAgIGNvbnN0IHJ1bGVUeXBlID0gcnVsZVR5cGVzW3J1bGU/LnR5cGVdO1xuICAgIGlmICghcnVsZVR5cGUpIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBydWxlIHR5cGUgJyR7cnVsZT8udHlwZX0nYCk7XG4gICAgY29uc3Qge2lucHV0ID0gdW5kZWZpbmVkLCBvcGVyYXRpb25zID0gW10sIG9wdGlvbnMgPSB7fX0gPSAoYXdhaXQgcnVsZVR5cGUocmVxdWVzdCwgcnVsZSwgY29uZmlnKSkgfHwge307XG4gICAgcmV0dXJuIHtpbnB1dCwgb3BlcmF0aW9ucywgb3B0aW9uc307XG59XG5cbmV4cG9ydCBkZWZhdWx0IGV4ZWN1dGVSdWxlIl19