"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const modifiers = __importStar(require("../modifiers"));
async function convertRequestToOrder(request, config) {
    const modifierNames = [
        'preset', 'size', 'trim', 'flip', 'format', 'radius', 'filter',
        'rotation', 'theme', 'color', 'quality',
    ];
    return modifierNames.reduce(async (acc, modifier) => {
        acc = await acc;
        if (!modifiers[modifier])
            return acc;
        return (await modifiers[modifier](acc, request, config)) || acc;
    }, Promise.resolve({ input: undefined, operations: [], options: {} }));
}
exports.convertRequestToOrder = convertRequestToOrder;
exports.default = convertRequestToOrder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVydFJlcXVlc3RUb09yZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2NvbnZlcnRSZXF1ZXN0VG9PcmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQSx3REFBMEM7QUFFbkMsS0FBSyxVQUFVLHFCQUFxQixDQUFDLE9BQWdCLEVBQUUsTUFBVztJQUNyRSxNQUFNLGFBQWEsR0FBRztRQUNsQixRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRO1FBQzlELFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVM7S0FDMUMsQ0FBQztJQUVGLE9BQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsR0FBUSxFQUFFLFFBQWdCLEVBQUUsRUFBRTtRQUM3RCxHQUFHLEdBQUcsTUFBTSxHQUFHLENBQUM7UUFDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7WUFBRSxPQUFPLEdBQUcsQ0FBQztRQUNyQyxPQUFPLENBQUMsTUFBTSxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQztJQUNwRSxDQUFDLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFxQixDQUFDLENBQUMsQ0FBQztBQUM3RixDQUFDO0FBWEQsc0RBV0M7QUFFRCxrQkFBZSxxQkFBcUIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cmVxdWVzdCwgb3JkZXJ9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0ICogYXMgbW9kaWZpZXJzIGZyb20gJy4uL21vZGlmaWVycyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb252ZXJ0UmVxdWVzdFRvT3JkZXIocmVxdWVzdDogcmVxdWVzdCwgY29uZmlnOiBhbnkpIHtcbiAgICBjb25zdCBtb2RpZmllck5hbWVzID0gW1xuICAgICAgICAncHJlc2V0JywgJ3NpemUnLCAndHJpbScsICdmbGlwJywgJ2Zvcm1hdCcsICdyYWRpdXMnLCAnZmlsdGVyJyxcbiAgICAgICAgJ3JvdGF0aW9uJywgJ3RoZW1lJywgJ2NvbG9yJywgJ3F1YWxpdHknLFxuICAgIF07XG5cbiAgICByZXR1cm4gbW9kaWZpZXJOYW1lcy5yZWR1Y2UoYXN5bmMgKGFjYzogYW55LCBtb2RpZmllcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGFjYyA9IGF3YWl0IGFjYztcbiAgICAgICAgaWYgKCFtb2RpZmllcnNbbW9kaWZpZXJdKSByZXR1cm4gYWNjO1xuICAgICAgICByZXR1cm4gKGF3YWl0IG1vZGlmaWVyc1ttb2RpZmllcl0oYWNjLCByZXF1ZXN0LCBjb25maWcpKSB8fCBhY2M7XG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKHtpbnB1dDogdW5kZWZpbmVkLCBvcGVyYXRpb25zOiBbXSwgb3B0aW9uczoge319IGFzIHVua25vd24gYXMgb3JkZXIpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29udmVydFJlcXVlc3RUb09yZGVyIl19