"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const buildOrderFromRequest_1 = __importDefault(require("./buildOrderFromRequest"));
const parseRequestEvent_1 = __importDefault(require("./parseRequestEvent"));
async function parseEvent(event, context, config = {}) {
    const request = parseRequestEvent_1.default(event);
    const order = await buildOrderFromRequest_1.default(request, config);
    return {
        ...order,
        output: 'buffer',
        sourceTypes: {
            ...(config.sourceTypes || {}),
            ...(order.sourceTypes || {}),
        },
        targetTypes: {
            ...(config.targetTypes || {}),
            ...(order.targetTypes || {}),
        },
        options: {
            ...(order.options || {}),
        },
    };
}
exports.parseEvent = parseEvent;
exports.default = parseEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VFdmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9wYXJzZUV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsb0ZBQTREO0FBQzVELDRFQUFvRDtBQUc3QyxLQUFLLFVBQVUsVUFBVSxDQUFDLEtBQVUsRUFBRSxPQUFZLEVBQUUsU0FBYyxFQUFFO0lBSXZFLE1BQU0sT0FBTyxHQUFHLDJCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBTXpDLE1BQU0sS0FBSyxHQUFHLE1BQU0sK0JBQXFCLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBSzNELE9BQU87UUFDSCxHQUFHLEtBQUs7UUFDUixNQUFNLEVBQUUsUUFBUTtRQUNoQixXQUFXLEVBQUU7WUFDVCxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsSUFBSSxFQUFFLENBQUM7WUFDN0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO1NBQy9CO1FBQ0QsV0FBVyxFQUFFO1lBQ1QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO1lBQzdCLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztTQUMvQjtRQUNELE9BQU8sRUFBRTtZQUNMLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztTQUMzQjtLQUNKLENBQUE7QUFFTCxDQUFDO0FBL0JELGdDQStCQztBQUVELGtCQUFlLFVBQVUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBidWlsZE9yZGVyRnJvbVJlcXVlc3QgZnJvbSBcIi4vYnVpbGRPcmRlckZyb21SZXF1ZXN0XCI7XG5pbXBvcnQgcGFyc2VSZXF1ZXN0RXZlbnQgZnJvbSBcIi4vcGFyc2VSZXF1ZXN0RXZlbnRcIjtcbmltcG9ydCB7b3JkZXJ9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VFdmVudChldmVudDogYW55LCBjb250ZXh0OiBhbnksIGNvbmZpZzogYW55ID0ge30pOiBQcm9taXNlPG9yZGVyPiB7XG5cbiAgICAvLyBmaXJzdCwgd2UgbmVlZCB0byByZXRyaWV2ZSB1c2VmdWwgaW5mb3JtYXRpb24gZnJvbSB0aGUgQVBJLWdhdGV3YXkgc2hhcGVkIGV2ZW50ICh1cmksIG1ldGhvZCwgcGFyYW1zLCAuLi4pXG5cbiAgICBjb25zdCByZXF1ZXN0ID0gcGFyc2VSZXF1ZXN0RXZlbnQoZXZlbnQpO1xuXG4gICAgLy8gdGhlbiwgd2UgbmVlZCB0byBjb252ZXJ0IHRoaXMgcmVxdWVzdCBpbnRvIGFuIGltYWdlbWFuLWNvbXBhdGlibGUgb3JkZXJcbiAgICAvLyAod2l0aCBhIGxpc3Qgb2Ygb3BlcmF0aW9ucywgaW5wdXQgbG9jYXRpb24sIC4uLikuXG4gICAgLy8gZXNzZW50aWFsbHkgZGVwZW5kaW5nIG9uIHRoZSByZXF1ZXN0IHVyaSB3aXRoIHBhdHRlcm5zIHRoYXQgYXJlIGRldGVjdGVkIGJhc2VkIG9uIHJ1bGVzIGZyb20gdGhlIGNvbmZpZy5cblxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgYnVpbGRPcmRlckZyb21SZXF1ZXN0KHJlcXVlc3QsIGNvbmZpZyk7XG5cbiAgICAvLyB0aGUgb3JkZXIgaXMgbm93IGR5bmFtaWNhbGx5IGJ1aWx0LCB3ZSBqdXN0IG5lZWQgdG8gZGVmaW5lIGRlZmF1bHQgdmFsdWVzIGluIGNhc2Ugc29tZSBpbmZvcm1hdGlvbiBhcmUgbWlzc2luZy5cbiAgICAvLyB0aGUgcmVzdWx0aW5nIG9yZGVyIGlzIGFsd2F5cyBvdXRwdXRpbmcgdG8gYSBidWZmZXIgKGZvciB0aGUgbGFtYmRhIGhhbmRsZXIgdG8gc2VyaWFsaXplIGl0KS5cblxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLm9yZGVyLFxuICAgICAgICBvdXRwdXQ6ICdidWZmZXInLFxuICAgICAgICBzb3VyY2VUeXBlczoge1xuICAgICAgICAgICAgLi4uKGNvbmZpZy5zb3VyY2VUeXBlcyB8fCB7fSksXG4gICAgICAgICAgICAuLi4ob3JkZXIuc291cmNlVHlwZXMgfHwge30pLFxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXRUeXBlczoge1xuICAgICAgICAgICAgLi4uKGNvbmZpZy50YXJnZXRUeXBlcyB8fCB7fSksXG4gICAgICAgICAgICAuLi4ob3JkZXIudGFyZ2V0VHlwZXMgfHwge30pLFxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAuLi4ob3JkZXIub3B0aW9ucyB8fCB7fSksXG4gICAgICAgIH0sXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlRXZlbnQiXX0=