"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const lambda_utils_1 = require("@ohoareau/lambda-utils");
const imageman_1 = __importDefault(require("@ohoareau/imageman"));
const utils_1 = require("./utils");
function default_1() {
    return lambda_utils_1.createRouterHandler(async function ({ config, responses }, event, context) {
        const { options, ...order } = await utils_1.parseEvent(event, config, context);
        return responses.buffer({ buffer: await imageman_1.default(order), ...options });
    });
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx5REFBMkQ7QUFDM0Qsa0VBQTBDO0FBQzFDLG1DQUFtQztBQUVuQztJQUNJLE9BQU8sa0NBQW1CLENBQUMsS0FBSyxXQUFXLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBQyxFQUFFLEtBQUssRUFBRSxPQUFPO1FBQzFFLE1BQU0sRUFBQyxPQUFPLEVBQUUsR0FBRyxLQUFLLEVBQUMsR0FBRyxNQUFNLGtCQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNyRSxPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBQyxNQUFNLEVBQUUsTUFBTSxrQkFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsT0FBTyxFQUFDLENBQUMsQ0FBQTtJQUN4RSxDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUM7QUFMRCw0QkFLQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3JlYXRlUm91dGVySGFuZGxlcn0gZnJvbSBcIkBvaG9hcmVhdS9sYW1iZGEtdXRpbHNcIjtcbmltcG9ydCBpbWFnZW1hbiBmcm9tICdAb2hvYXJlYXUvaW1hZ2VtYW4nO1xuaW1wb3J0IHtwYXJzZUV2ZW50fSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY3JlYXRlUm91dGVySGFuZGxlcihhc3luYyBmdW5jdGlvbiAoe2NvbmZpZywgcmVzcG9uc2VzfSwgZXZlbnQsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3Qge29wdGlvbnMsIC4uLm9yZGVyfSA9IGF3YWl0IHBhcnNlRXZlbnQoZXZlbnQsIGNvbmZpZywgY29udGV4dCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZXMuYnVmZmVyKHtidWZmZXI6IGF3YWl0IGltYWdlbWFuKG9yZGVyKSwgLi4ub3B0aW9uc30pXG4gICAgfSlcbn0iXX0=