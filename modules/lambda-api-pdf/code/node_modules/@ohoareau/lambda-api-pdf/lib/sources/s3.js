"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_1 = require("@ohoareau/aws");
async function s3(ctx) {
    var _a;
    let { bucket, name } = ctx.query;
    const bucketName = (((_a = ctx.config) === null || _a === void 0 ? void 0 : _a.buckets) || {})[bucket];
    if (!bucketName)
        return undefined;
    return {
        definition: await aws_1.s3.fromJsonFile(bucketName, `${name}.json`),
    };
}
exports.s3 = s3;
exports.default = s3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiczMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc291cmNlcy9zMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUEwQztBQUluQyxLQUFLLFVBQVUsRUFBRSxDQUFDLEdBQVE7O0lBQzdCLElBQUksRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztJQUMvQixNQUFNLFVBQVUsR0FBRyxDQUFDLE9BQUEsR0FBRyxDQUFDLE1BQU0sMENBQUUsT0FBTyxLQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZELElBQUksQ0FBQyxVQUFVO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFDbEMsT0FBTztRQUNILFVBQVUsRUFBRSxNQUFNLFFBQUssQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLEdBQUcsSUFBSSxPQUFPLENBQUM7S0FDbkUsQ0FBQztBQUNOLENBQUM7QUFQRCxnQkFPQztBQUVELGtCQUFlLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7czMgYXMgYXdzczN9IGZyb20gJ0BvaG9hcmVhdS9hd3MnO1xuaW1wb3J0IHtjdHh9IGZyb20gJ0BvaG9hcmVhdS9sYW1iZGEtdXRpbHMnO1xuaW1wb3J0IHtkb2N1bWVudF9kZWZpbml0aW9ufSBmcm9tIFwiQG9ob2FyZWF1L3JlYWN0LWRvY3VtZW50LXJlbmRlcmVyXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzMyhjdHg6IGN0eCk6IFByb21pc2U8e2RlZmluaXRpb246IGRvY3VtZW50X2RlZmluaXRpb259fHVuZGVmaW5lZD4ge1xuICAgIGxldCB7YnVja2V0LCBuYW1lfSA9IGN0eC5xdWVyeTtcbiAgICBjb25zdCBidWNrZXROYW1lID0gKGN0eC5jb25maWc/LmJ1Y2tldHMgfHwge30pW2J1Y2tldF07XG4gICAgaWYgKCFidWNrZXROYW1lKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlZmluaXRpb246IGF3YWl0IGF3c3MzLmZyb21Kc29uRmlsZShidWNrZXROYW1lLCBgJHtuYW1lfS5qc29uYCksXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgczMiXX0=